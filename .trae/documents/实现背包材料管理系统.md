## 目标
- 在 `assets/scripts/data` 新增可挂载到场景的材料背包组件，编辑器可见并可配置。
- 提供四类材料：`挑战券`、`抽奖券`、`进阶石`、`英雄碎片`（按英雄名计数）。
- 暴露增加/扣除接口，并进行本地持久化存储。

## 组件与文件
- 新增组件文件：`assets/scripts/data/MaterialInventory.ts`（继承 `Component`）。
- 复用并扩展 `assets/scripts/data/PlayerStorage.ts`，增加材料相关的 `load*/save*` 方法与键值。
- 可选依赖 `HeroRegistry`：用于初始化/同步英雄碎片条目。参考 `listAllHeroes` 在 `assets/scripts/data/HeroRegistry.ts:97-99`。

## 编辑器属性
- `challengeTickets: CCInteger`（挑战券）
- `lotteryTickets: CCInteger`（抽奖券）
- `ascendStones: CCInteger`（进阶石）
- `registry: HeroRegistry | null`（用于同步碎片）
- `fragments: HeroFragmentEntry[]`：每项包含 `name: CCString`（英雄名）、`count: CCInteger`（碎片数量）
- 在 `onLoad` 时读取持久化数据并刷新到属性；在属性变更或接口调用时即时保存。

## 接口定义
- `addChallengeTickets(n: number): void`
- `consumeChallengeTickets(n: number): boolean`
- `addLotteryTickets(n: number): void`
- `consumeLotteryTickets(n: number): boolean`
- `addAscendStones(n: number): void`
- `consumeAscendStones(n: number): boolean`
- `addHeroFragments(name: string, n: number): void`
- `consumeHeroFragments(name: string, n: number): boolean`
- `getHeroFragmentCount(name: string): number`
- 规则：参数取整并下限 0；扣除不足返回 `false` 且不变更；成功后立即持久化。

## 持久化方案
- 使用 `sys.localStorage`，与 `PlayerStorage` 的模式一致。
- 键值：
  - `materials:challengeTickets`
  - `materials:lotteryTickets`
  - `materials:ascendStones`
  - `materials:fragments`（JSON，形如 `{ "英雄名": 数量 }`）
- 读写时做健壮性处理：解析失败采用默认值，所有数值 `Math.max(0, Math.floor(v))`。

## 碎片同步逻辑
- 若设置了 `registry`，在 `onLoad`：
  - 读取 `registry.listAllHeroes()`（`assets/scripts/data/HeroRegistry.ts:97-99`）。
  - 确保 `fragments` 中包含这些英雄名的条目；缺失者以 `count=0` 追加。
  - 持久化时以英雄名做键；名称前后空白统一 `trim()`。

## 使用示例
- 在场景中添加 `MaterialInventory` 组件并（可选）绑定 `HeroRegistry`。
- 调用：
  - 战斗结算：`addChallengeTickets(1)` / `addAscendStones(5)`
  - 抽卡：`consumeLotteryTickets(1)`
  - 合成碎片：`addHeroFragments('影刃', 10)` / `consumeHeroFragments('影刃', 30)`
- 所有变更会自动保存到本地存储，重新进入游戏会被恢复。

## 变更清单
- 新增：`assets/scripts/data/MaterialInventory.ts`
- 修改：`assets/scripts/data/PlayerStorage.ts`（添加材料读写方法）

## 验证
- 场景运行后检查编辑器中的材料数是否从本地存储恢复。
- 在测试脚本中调用各 `add/consume` 接口，验证返回值与持久化效果正确。