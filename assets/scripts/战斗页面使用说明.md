主脚本能力

- 生成头像： setHeroCandidates(tags: string[]) 按传入标签在底部 Layout 里生成 N 个头像项。
- 选择控制：点击头像切换选中，遮罩子节点 mask 显示/隐藏；最多选择 maxSelectCount （默认 5）。
- 左侧布阵： placeHeroesOnLeftFromSelection() 按已选头像标签，从 HeroInfoManager 取预制体并依次放入左侧 1~5 位置。
- 右侧布阵接口： configureRightByStage(stageId: string, enemyTags: string[]) 按关卡的敌人标签把预制体放到右侧位置（ stageId 仅作为业务标识保留）。
- UI 文本与背景：
  - setPowers(left: number, right: number) 更新左右战力
  - setStageProgress(text: string) 更新关卡进度文本
  - setBackground(frame: SpriteFrame) 更新背景图
典型使用流程

- 打开战斗页时：
  - battle.setBackground(bgFrame)
  - battle.setPowers(7640, 9590)
  - battle.setStageProgress('关卡：2-12')
  - battle.setHeroCandidates(['hero_dx', 'hero_xx', 'hero_01', 'hero_02'])
  - battle.configureRightByStage('2-12', ['enemy_a', 'enemy_b', 'enemy_c'])
- 玩家点击头像进行选择；点击“开始挑战”按钮会调用 onClickStart() ，自动把所选英雄布到左侧位置，并向外发出事件 start ，携带已选标签列表；返回按钮发出 back 事件。
文件概览

- HeroInfoManager.ts
  - 字段： heroTags: string[] 、 avatars: SpriteFrame[] 、 prefabs: Prefab[]
  - 方法： getAvatar(tag) 、 getPrefab(tag) 、 getHeroInfo(tag) 、 hasHero(tag) 、 validate()
- BattlePageManager.ts
  - 面板字段： background 、 leftPower 、 rightPower 、 stageProgress 、 backButton 、 startButton 、 bottomLayout 、 avatarItemPrefab 、 avatarMaskName 、 leftPositions[] 、 rightPositions[] 、 heroInfo 、 maxSelectCount
  - 主要方法： setHeroCandidates 、 placeHeroesOnLeftFromSelection 、 configureRightByStage 、 setPowers 、 setStageProgress 、 setBackground 、 onClickBack 、 onClickStart
## 新增：战斗前/战斗后切换，战斗布局与战斗头像

为 BattlePageManager 增加以下属性与流程，用于在进入关卡与开始战斗时切换界面并展示战斗头像：

- 属性绑定（在编辑器中）：
  - `preBattleRoot`：战斗前根节点（进入关卡时显示）。
  - `postBattleRoot`：战斗后/战斗中根节点（开始战斗后显示）。
  - `bottomLayout`：战斗前的候选头像布局（已有）。
  - `avatarItemPrefab`：候选头像预制体（根节点带 `Sprite`，可选遮罩子节点名为 `mask`）。
  - `battleLayout`：战斗中头像的布局节点（请挂上 `Layout` 组件以自动排列）。
  - `battleAvatarPrefab`：战斗头像预制体（根节点带 `Sprite`）。
  - `leftPositions`/`rightPositions`：站位槽位 1~5（用于布阵）。
  - `registry`：HeroRegistry 资源（解析头像与人物预制体）。

- 使用流程：
  1. 进入关卡时调用 `setStageAndEnemies(stageId, enemies)`，组件会自动显示战斗前界面（`showPreBattle()`）。
  2. 在战斗前界面里，玩家在 `bottomLayout` 中选择头像（支持遮罩高亮），左侧站位实时刷新。
  3. 点击“开始战斗”后，组件会：
     - 将所选角色用 `battleAvatarPrefab` 实例化并放入 `battleLayout`（`populateBattleAvatars()`）。
     - 切换到战斗后界面（`showPostBattle()`）。

- 额外说明：
  - 如需更改候选头像遮罩节点名，设置 `avatarMaskName`（默认 `mask`）。
  - `battleLayout` 只负责承载战斗头像，实际站位/逻辑可继续通过 `leftPositions/rightPositions` 与现有战斗系统处理。